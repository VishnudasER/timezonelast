{% extends 'user/base.html' %}
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Magic Zoom Plus</title>
  <link rel="stylesheet" href="{% static '/css/magiczoomplus.css' %}">
  <script src="{% static 'magiczoomplus/magiczoomplus.js' %}" type="text/javascript"></script>
  <!-- Bootstrap and other dependencies here -->
</head>

<body style="color: #000;">
  {% for message in messages %}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% endfor %}

  <div class="container mt-3">
    <div class="row">
      <div class="col-md-6">
        <div class="app-figure" id="zoom-fig">
          <a id="Zoom-1" class="MagicZoom" title="" href="{{ data.image1.url }}"
            data-zoom-image-2x="{{ data.image1.url }}" data-image-2x="{{ data.image1.url }}">
            <img src="{{ data.image1.url }}" srcset="{{ data.image1.url }}" class="img-fluid" />
          </a>
          <div class="selectors mt-3">
            <a data-zoom-id="Zoom-1" href="{{ data.image1.url }}" data-image="{{ data.image1.url }}" height='2400'
              data-zoom-image-2x="{{ data.image1.url }}" height='2800' data-image-2x="{{ data.image1.url }}"
              height='1800'>
              <img srcset="{{ data.image1.url }}" src="{{ data.image1.url }}" width='70px' class="img-fluid" />
            </a>

            {% if data.image2 %}
            <a data-zoom-id="Zoom-1" href="{{ data.image2.url }}" data-image="{{ data.image2.url }}"
              data-zoom-image-2x="{{ data.image2.url }}" data-image-2x="{{ data.image2.url }}">
              <img srcset="{{ data.image2.url }}" src="{{ data.image2.url }}" width='70px' class="img-fluid" />
            </a>
            {% endif %}

            {% if data.image3 %}
            <a data-zoom-id="Zoom-1" href="{{ data.image3.url }}" data-image="{{ data.image3.url }}"
              data-zoom-image-2x="{{ data.image3.url }}" data-image-2x="{{ data.image3.url }}">
              <img srcset="{{ data.image3.url }}" src="{{ data.image3.url }}" width='70px' class="img-fluid" />
            </a>
            {% endif %}

            {% if data.image4 %}
            <a data-zoom-id="Zoom-1" href="{{ data.image4.url }}" data-image="{{ data.image4.url }}"
              data-zoom-image-2x="{{ data.image4.url }}" data-image-2x="{{ data.image4.url }}">
              <img srcset="{{ data.image4.url }}" src="{{ data.image4.url }}" width='70px' class="img-fluid" />
            </a>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">{{ data.title }}</h4>
            <p class="card-text"><strong>Category:</strong> {{ data.category.title }}</p>
            <p class="card-text"><strong>Brand:</strong> {{ data.brand.title }}</p>
            <p class="card-text"><strong>Description:</strong> {{ data.description }}</p>
            <!-- <p class="card-text"><strong>Price:</strong> {{ data.price }}</p> -->
            <!-- <p class="card-text"><strong>Old Price:</strong> {{ data.old_price }}</p> -->
            {% if category_offers %}
            <tr>
              <td><b>Category Offer</b></td>
              <td>
                {% for offer in category_offers %}
                {{ offer.percent_offer }}% offer valid from {{ offer.start_date }} to {{offer.end_date}}
                {% endfor %}
              </td>
            </tr><br><br>
            {% endif %}
            {% if product_offer %}
            <tr>
              <td><b>Product Offer</b></td>
              <td>
                
                {% for offer in product_offer %}
                {{ offer.percent_offer }}% offer valid from {{ offer.start_date }} to {{ offer.end_date }}
                {% endfor %}
                {% else %}
                <!-- <p>No offers available for this product</p> -->
              </td>
            </tr>
            {% endif %}
            <tr>
              <tr>
                <td>
                  {% if product_offer %}
                    <p><b>Price</b></p>
                    
                    <p>Original Price: $ {{ data.price }}</p>
                    <p>Offer Price: $ {{  data.get_discounted_price|floatformat:"2" }}</p>
                  {% else %}
                    <p><b>Price</b></p>
                    <p>Price: $ {{ data.price }}</p>
                    <!-- <p>No offer</p> -->
                  {% endif %}
                </td>
              </tr>
              
          </div>
            <div class="mt-4">
              <!-- Add to Cart Form -->
              <form method="post" action="{% url 'add_to_cart' data.id %}" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary shadow-0">Add to Cart</button>
              </form>

              <!-- Add to Wishlist Form -->
              <form method="post" action="{% url 'add_to_wishlist' data.id %}" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-light border px-2 pt-2 icon-hover addToWishlistBtn">
                  <i class="fas fa-heart fa-lg px-1"></i> Add to Wishlist
                </button>
              </form>
            </div>

            <div class="mt-4">
              {% if data.stock > 0 %}
              <p><strong>Stock:</strong> {{ data.stock }}</p>
              <!-- Additional details for available products can be added here -->
              {% else %}
              <p class="text-danger">Out of stock</p>
              <!-- Additional details or button for out-of-stock products can be added here -->
              {% endif %}
              
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="{% static 'js/magiczoomplus.js' %}"></script>
  <script>
    // JavaScript to show a confirmation message when the Add to Wishlist button is clicked
    document.querySelector('.addToWishlistBtn').addEventListener('click', function () {
      alert('Added to Wishlist!');
    });
  </script>

</body>

</html>
{% endblock %}